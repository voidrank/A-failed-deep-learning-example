# Project Report

**Shiyi Lan**  
**Fudan Universary**

## Overview

用lenet(一种卷积神经网络)来学习一个出租车一天的轨迹输出的是这辆出租车**载客**的总路程。用于搞清楚这辆车是否没打表载人，开黑车。


## Introduction to Algorithm

先将出租车信息在一个256*256的图上画出，然后计算出他今天载客的总路程作为label。通过lenet学习做这个回归问题。


### 网络介绍

1. conv
2. pooling
3. ReLU
4. conv
5. pooling
6. ReLU
7. fully connect
8. fully connect

end-to-end learning

## 实验数据处理
用python构造lmdb数据库，分别是label和data两个数据库，再把数据分成训练集和测试集。


## 实验结果
失败。神经网络对于所有的输出输出了一个最大路程的平均值。


### 失败原因
##### 缺乏时间标签
被划在图上的轨迹无法告诉cnn轨迹中的事件信息标签问题。
##### 轨迹上的feature关于载客长度不具有高斯分布性质
deep learning并不是万能学习工具，deep learning在图片学习方面优势在于通过convolution层把相邻的像素点进行考虑，同时通过pooling层进行语义提取。其优势在于提取图片的语义。然而在这个问题下这种语义并不凸显。同时这个问题还是一个回归问题，这和cnn擅长解决的东西不同。

## 修改建议
此问题不适合通过图片轨迹进行处理。

### 改进做法
#### 切分路径
我们的目标是对于一段路径，通过一定的办法使得它能够分解成几段可能为载客线路的部分。具体的做法是把路途中的热点（例如居民区，办公楼）和达到这个热点时的速度同时进行考虑，可以用CRF(condition random field)综合热点度，速度，是否有人的变化（上车下车）判断这个点司机有没有停车，进行对CRF参数的学习。

#### 对切分路径识别

这一部分主要是对第一步已经切分好的路径进行识别，判断这一部分有没有车。对于切分后的路径，识别这一段内是否载人，需要把之前和之后的路段的信息考虑进来。对于切分点比较弱的地方（上下车的概率可能低）我们更希望这两段路同属于载人或者同属于不载人的状态。对于切分点反应比较强的地方（上下车的概率可能高）我们更希望这两段路不同属于载人或者不载人的状态。我们可以通过CRF迭代的办法，首先先将通过一元经验判断可能是路段打上载人的标签，在很可能不是路段打上不载人的标签。通过crf的迭代，再次判定每一段的载客情况。

#### 计算路径长度
对于多次迭代后收敛的部分，计算它们的长度。